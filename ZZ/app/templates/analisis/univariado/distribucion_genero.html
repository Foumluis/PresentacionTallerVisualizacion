{% extends 'base.html' %}

{% block title %}Distribución de Clientes por Género{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <h2><i class="bi bi-gender-ambiguous me-2"></i>Distribución de Clientes por Género</h2>
            <p class="text-muted">Análisis univariado de la distribución de clientes según su género</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Gráfico de Distribución</h5>
                </div>
                <div class="card-body">
                    <canvas id="genderChart"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Estadísticas</h5>
                </div>
                <div class="card-body">
                    <p>Aquí puedes agregar las estadísticas relacionadas con la distribución de clientes por género.</p>
                    <!-- Add your statistics here -->
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Interpretación</h5>
                </div>
                <div class="card-body">
                    <p>Incluye aquí la interpretación de los datos y los insights obtenidos del análisis.</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    const ctx = document.getElementById('miGrafico');//consigue el id de donde se va a colocar
    let delayed
    const miGrafico = new Chart(ctx, {// grafico y el indice
      type: 'bar',// tipo de barra
      data: {
        labels: ["Enero","Febrero","Marzo","Abril","Mayo","Junio"],// nombre del eje x
        datasets: [{//datos a ocupar
          label: 'Ventas ($)',//nombre del eje y
          data: [1200, 1900, 3000, 2500, 3200, 2000],//datos
          backgroundColor: 'rgba(54, 162, 235, 0.6)',//color de las barras
          borderColor: 'rgba(54, 162, 235, 1)',//color de los bordes
          borderWidth: 1// tamaño del borde
        }]
      },
      options: {//opciones
        animation: {
              onComplete: () => {
                delayed = true;
              },
              delay: (context) => {
                let delay = 0;
                if (context.type === 'data' && context.mode === 'default' && !delayed) {
                  delay = context.dataIndex * 300 + context.datasetIndex * 100;
                }
                return delay;
              },
        },
        responsive: true,// si al pasar por encima se coloca algun tipo de informacion
        plugins: {
          legend: { display: false }// no mostrar la leyenda
        },
        scales: {
          y: {
            beginAtZero: true,// indicamos que empiece de cero
            title: { display: true, text: 'Monto en dólares' }//titulo del eje y
          },
          x: {
            title: { display: true, text: 'Meses' }//titulo del eje x
          }
        }
      }
    });
</script>
{% endblock %}
