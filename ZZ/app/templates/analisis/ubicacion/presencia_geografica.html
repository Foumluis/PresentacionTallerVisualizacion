{% extends 'base.html' %}

{% block title %}Presencia Geográfica Pobre en EEUU{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <h2><i class="bi bi-map me-2"></i>Presencia Geográfica Pobre en EEUU</h2>
            <p class="text-muted">Análisis de las zonas con baja presencia de ventas en Estados Unidos</p>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Mapa de Presencia Geográfica</h5>
                </div>
                <div class="card-body">
                    <div id="presenciaMap" style="height: 500px;"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Estados con Menor Presencia</h5>
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Estado</th>
                                <th>Cantidad de Ventas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Wyoming</td>
                                <td>12</td>
                            </tr>
                            <tr>
                                <td>Vermont</td>
                                <td>15</td>
                            </tr>
                            <tr>
                                <td>Alaska</td>
                                <td>18</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Recomendaciones</h5>
                </div>
                <div class="card-body">
                    <ul>
                        <li>Desarrollar estrategias de marketing para estados con baja presencia</li>
                        <li>Analizar barreras de entrada en mercados específicos</li>
                        <li>Considerar asociaciones locales para expandir la presencia</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Placeholder for map showing geographic presence
    const mapData = [{
        type: 'choropleth',
        locationmode: 'USA-states',
        locations: ['WY', 'VT', 'AK', 'ND', 'SD', 'MT', 'CA', 'TX', 'FL', 'NY'],
        z: [12, 15, 18, 25, 28, 30, 1200, 1100, 980, 1050],
        text: ['Wyoming', 'Vermont', 'Alaska', 'North Dakota', 'South Dakota', 'Montana', 
               'California', 'Texas', 'Florida', 'New York'],
        colorscale: [
            [0, 'rgb(255, 200, 200)'],
            [0.5, 'rgb(255, 255, 200)'],
            [1, 'rgb(200, 255, 200)']
        ],
        colorbar: {
            title: 'Ventas'
        }
    }];

    const mapLayout = {
        title: 'Presencia de Ventas por Estado',
        geo: {
            scope: 'usa'
        }
    };

    Plotly.newPlot('presenciaMap', mapData, mapLayout);
</script>
{% endblock %}
